<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>User Dashboard</h1>
        <div id="userInfo" class="mb-4"></div>
        <button id="logoutButton" class="btn btn-danger">Logout</button>
    </div>

    <script>
        const userInfoDiv = document.getElementById('userInfo');
        const token = localStorage.getItem('token');

        if (!token) {
            window.location.href = 'login.html'; // Redirect to login if not authenticated
        }

        // Fetch user info (you'll need to implement this in your backend)
        async function fetchUserInfo() {
            const response = await fetch('/api/user', {
                method: 'GET',
                headers: { 'Authorization': `Bearer ${token}` },
            });

            if (response.ok) {
                const user = await response.json();
                displayUserInfo(user);
            } else {
                alert('Error fetching user info');
            }
        }

        function displayUserInfo(user) {
            userInfoDiv.innerHTML = `
                <h2>${user.fullName}</h2>
                <img src="${user.coverPhoto}" alt="Cover Photo" class="img-fluid mb-2">
                <div>
                    <strong>Username:</strong> ${user.username}<br>
                    <strong>Email:</strong> ${user.email}<br>
                    <strong>Date of Birth:</strong> ${new Date(user.dateOfBirth).toLocaleDateString()}<br>
                    <strong>Phone:</strong> ${user.phone}<br>
                    <strong>Location:</strong> ${user.location}<br>
                    <strong>Bio:</strong> ${user.bio}<br>
                    <img src="${user.profilePicture}" alt="Profile Picture" class="img-fluid">
                </div>
            `;
        }

        document.getElementById('logoutButton').addEventListener('click', () => {
            localStorage.removeItem('token');
            window.location.href = 'login.html'; // Redirect to login page on logout
        });

        fetchUserInfo(); // Fetch user info on page load
    </script>
</body>
</html>
